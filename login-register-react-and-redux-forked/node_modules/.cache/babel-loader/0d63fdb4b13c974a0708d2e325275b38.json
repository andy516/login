{"ast":null,"code":"import _defineProperty from \"/Users/user01/Desktop/login-register-react-and-redux-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/user01/Desktop/login-register-react-and-redux-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/user01/Desktop/login-register-react-and-redux-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/user01/Desktop/login-register-react-and-redux-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/user01/Desktop/login-register-react-and-redux-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/user01/Desktop/login-register-react-and-redux-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/user01/Desktop/login-register-react-and-redux-forked/src/Auth/Register.js\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { addUser } from \"../actions\";\nimport Error from \"../error\";\n\nvar Register = /*#__PURE__*/function (_React$Component) {\n  _inherits(Register, _React$Component);\n\n  function Register() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Register);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Register)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      passwordConfirm: \"\",\n      existing: \"hey\",\n      error: false,\n      errorMsg: \"\",\n      errorClass: \"\",\n      inputClass: \"\"\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.handleRegister = function (e) {\n      e.preventDefault();\n      var _this$state = _this.state,\n          username = _this$state.username,\n          email = _this$state.email,\n          password = _this$state.password,\n          passwordConfirm = _this$state.passwordConfirm,\n          existing = _this$state.existing;\n\n      if (username === \"\" || email === \"\" || password === \"\" || passwordConfirm === \"\") {\n        _this.missingFields();\n      } else if (password.length < 6 || password !== passwordConfirm) {\n        _this.matchPassword();\n      } else if (existing === username) {\n        _this.userExist();\n      } else {\n        var newUser = {\n          username: username,\n          email: email,\n          password: password\n        };\n\n        _this.registerSuccess();\n\n        _this.clearInputs();\n\n        _this.props.addUser(newUser); //this.props.history.push(\"/login\");\n\n      }\n    };\n\n    _this.missingFields = function () {\n      _this.errorStateFields();\n\n      _this.setState({\n        error: true,\n        errorMsg: \"請填寫所有表格\",\n        errorClass: \"is-danger\"\n      });\n\n      setTimeout(function () {\n        return _this.setState({\n          error: false,\n          errorMsg: \"\",\n          errorClass: \"\"\n        });\n      }, 4000);\n    };\n\n    _this.matchPassword = function () {\n      _this.setState({\n        error: true,\n        errorMsg: \"密碼為6個字符\",\n        errorClass: \"is-danger\"\n      });\n\n      setTimeout(function () {\n        return _this.setState({\n          error: false,\n          errorMsg: \"\",\n          errorClass: \"\"\n        });\n      }, 4000);\n    };\n\n    _this.userExist = function () {\n      document.getElementById(\"userName\").classList = \"input is-danger\";\n\n      _this.setState({\n        error: true,\n        errorMsg: \"此用戶已存在\",\n        errorClass: \"is-danger\"\n      });\n\n      setTimeout(function () {\n        return _this.setState({\n          error: false,\n          errorMsg: \"\",\n          errorClass: \"\"\n        });\n      }, 4000);\n    };\n\n    _this.registerSuccess = function () {\n      _this.setState({\n        error: true,\n        errorMsg: \"\\u8A3B\\u518A\\u6210\\u529F! \\u8B1D\\u8B1D\\u4F60\\u7684\\u8A3B\\u518A \".concat(_this.state.username, \"!\"),\n        errorClass: \"is-success\"\n      });\n\n      setTimeout(function () {\n        return _this.setState({\n          error: false,\n          errorMsg: \"\",\n          errorClass: \"\"\n        });\n      }, 4000);\n    };\n\n    _this.clearInputs = function () {\n      _this.setState({\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        passwordConfirm: \"\"\n      });\n    };\n\n    _this.errorStateFields = function () {\n      var _this$state2 = _this.state,\n          username = _this$state2.username,\n          email = _this$state2.email,\n          password = _this$state2.password,\n          passwordConfirm = _this$state2.passwordConfirm;\n\n      if (username === \"\") {\n        document.getElementById(\"userName\").classList = \"input is-danger\";\n      } else {\n        document.getElementById(\"userName\").classList = \"input is-success\";\n      }\n\n      if (email === \"\") {\n        document.getElementById(\"email\").classList = \"input is-danger\";\n      } else {\n        document.getElementById(\"email\").classList = \"input is-success\";\n      }\n\n      if (password === \"\") {\n        document.getElementById(\"password\").classList = \"input is-danger\";\n      } else {\n        document.getElementById(\"password\").classList = \"input is-success\";\n      }\n\n      if (passwordConfirm === \"\") {\n        document.getElementById(\"passwordConfirm\").classList = \"input is-danger\";\n      } else {\n        document.getElementById(\"passwordConfirm\").classList = \"input is-success\";\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Register, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state3 = this.state,\n          errorMsg = _this$state3.errorMsg,\n          errorClass = _this$state3.errorClass,\n          username = _this$state3.username,\n          email = _this$state3.email,\n          password = _this$state3.password,\n          passwordConfirm = _this$state3.passwordConfirm,\n          inputClass = _this$state3.inputClass;\n      this.props.userExist.map(function (e) {\n        return console.log(e.username);\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 7\n        }\n      }, this.state.error ? /*#__PURE__*/React.createElement(Error, {\n        classType: errorClass,\n        message: errorMsg,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }\n      }) : \"\", /*#__PURE__*/React.createElement(\"form\", {\n        className: \"section\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"title is-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }\n      }, \"\\u8A3B\\u518A\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"field\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }\n      }, \"\\u5E33\\u865F:\"), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"userName\",\n        onChange: this.handleChange,\n        name: \"username\",\n        type: \"text\",\n        className: \"input\",\n        placeholder: \"\\u8ACB\\u8F38\\u5165\\u5E33\\u865F\",\n        value: username,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"field\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }\n      }, \"\\u4FE1\\u7BB1:\"), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"email\",\n        onChange: this.handleChange,\n        name: \"email\",\n        type: \"email\",\n        className: \"input\" + inputClass,\n        placeholder: \"\\u8ACB\\u8F38\\u5165\\u4FE1\\u7BB1\",\n        value: email,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"field\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }\n      }, \"\\u5BC6\\u78BC:\"), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"password\",\n        onChange: this.handleChange,\n        name: \"password\",\n        type: \"password\",\n        className: \"input\" + inputClass,\n        placeholder: \"\\u8ACB\\u8F38\\u5165\\u5BC6\\u78BC\",\n        value: password,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"field\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 13\n        }\n      }, \"Confirm Password:\"), /*#__PURE__*/React.createElement(\"input\", {\n        id: \"passwordConfirm\",\n        onChange: this.handleChange,\n        name: \"passwordConfirm\",\n        type: \"password\",\n        className: \"input\" + inputClass,\n        placeholder: \"Confirm password..\",\n        value: passwordConfirm,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"field\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        onClick: this.handleRegister,\n        className: \"button is-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }\n      }, \"Register\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"field\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }\n      }, \"Already have an account? click \", /*#__PURE__*/React.createElement(Link, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 46\n        }\n      }, \"here\")))));\n    }\n  }]);\n\n  return Register;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    userExist: state.user.storedUsers\n  };\n};\n\nexport default connect(mapStateToProps, {\n  addUser: addUser\n})(Register);","map":{"version":3,"sources":["/Users/user01/Desktop/login-register-react-and-redux-forked/src/Auth/Register.js"],"names":["React","Link","connect","addUser","Error","Register","state","username","email","password","passwordConfirm","existing","error","errorMsg","errorClass","inputClass","handleChange","e","setState","target","name","value","handleRegister","preventDefault","missingFields","length","matchPassword","userExist","newUser","registerSuccess","clearInputs","props","errorStateFields","setTimeout","document","getElementById","classList","map","console","log","Component","mapStateToProps","user","storedUsers"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { addUser } from \"../actions\";\n\nimport Error from \"../error\";\n\nclass Register extends React.Component {\n  state = {\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    passwordConfirm: \"\",\n    existing: \"hey\",\n    error: false,\n    errorMsg: \"\",\n    errorClass: \"\",\n    inputClass: \"\"\n  };\n\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  handleRegister = e => {\n    e.preventDefault();\n    const { username, email, password, passwordConfirm, existing } = this.state;\n\n    if (\n      username === \"\" ||\n      email === \"\" ||\n      password === \"\" ||\n      passwordConfirm === \"\"\n    ) {\n      this.missingFields();\n    } else if (password.length < 6 || password !== passwordConfirm) {\n      this.matchPassword();\n    } else if (existing === username) {\n      this.userExist();\n    } else {\n      const newUser = {\n        username: username,\n        email: email,\n        password: password\n      };\n\n      this.registerSuccess();\n      this.clearInputs();\n      this.props.addUser(newUser);\n      //this.props.history.push(\"/login\");\n    }\n  };\n\n  missingFields = () => {\n    this.errorStateFields();\n\n    this.setState({\n      error: true,\n      errorMsg: \"請填寫所有表格\",\n      errorClass: \"is-danger\"\n    });\n    setTimeout(\n      () => this.setState({ error: false, errorMsg: \"\", errorClass: \"\" }),\n      4000\n    );\n  };\n\n  matchPassword = () => {\n    this.setState({\n      error: true,\n      errorMsg:\n        \"密碼為6個字符\",\n      errorClass: \"is-danger\"\n    });\n    setTimeout(\n      () => this.setState({ error: false, errorMsg: \"\", errorClass: \"\" }),\n      4000\n    );\n  };\n\n  userExist = () => {\n    document.getElementById(\"userName\").classList = \"input is-danger\";\n\n    this.setState({\n      error: true,\n      errorMsg: \"此用戶已存在\",\n      errorClass: \"is-danger\"\n    });\n    setTimeout(\n      () => this.setState({ error: false, errorMsg: \"\", errorClass: \"\" }),\n      4000\n    );\n  };\n\n  registerSuccess = () => {\n    this.setState({\n      error: true,\n      errorMsg: `註冊成功! 謝謝你的註冊 ${this.state.username}!`,\n      errorClass: \"is-success\"\n    });\n    setTimeout(\n      () => this.setState({ error: false, errorMsg: \"\", errorClass: \"\" }),\n      4000\n    );\n  };\n\n  clearInputs = () => {\n    this.setState({\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      passwordConfirm: \"\"\n    });\n  };\n\n  errorStateFields = () => {\n    const { username, email, password, passwordConfirm } = this.state;\n\n    if (username === \"\") {\n      document.getElementById(\"userName\").classList = \"input is-danger\";\n    } else {\n      document.getElementById(\"userName\").classList = \"input is-success\";\n    }\n    if (email === \"\") {\n      document.getElementById(\"email\").classList = \"input is-danger\";\n    } else {\n      document.getElementById(\"email\").classList = \"input is-success\";\n    }\n    if (password === \"\") {\n      document.getElementById(\"password\").classList = \"input is-danger\";\n    } else {\n      document.getElementById(\"password\").classList = \"input is-success\";\n    }\n    if (passwordConfirm === \"\") {\n      document.getElementById(\"passwordConfirm\").classList = \"input is-danger\";\n    } else {\n      document.getElementById(\"passwordConfirm\").classList = \"input is-success\";\n    }\n  };\n\n  render() {\n    const {\n      errorMsg,\n      errorClass,\n      username,\n      email,\n      password,\n      passwordConfirm,\n      inputClass\n    } = this.state;\n\n    this.props.userExist.map(e => console.log(e.username));\n\n    return (\n      <div className=\"container\">\n        {this.state.error ? (\n          <Error classType={errorClass} message={errorMsg} />\n        ) : (\n          \"\"\n        )}\n        <form className=\"section\">\n          <h1 className=\"title is-1\">註冊</h1>\n          <div className=\"field\">\n            <label className=\"label\">帳號:</label>\n            <input\n              id=\"userName\"\n              onChange={this.handleChange}\n              name=\"username\"\n              type=\"text\"\n              className=\"input\"\n              placeholder=\"請輸入帳號\"\n              value={username}\n            />\n          </div>\n          <div className=\"field\">\n            <label className=\"label\">信箱:</label>\n            <input\n              id=\"email\"\n              onChange={this.handleChange}\n              name=\"email\"\n              type=\"email\"\n              className={\"input\" + inputClass}\n              placeholder=\"請輸入信箱\"\n              value={email}\n            />\n          </div>\n          <div className=\"field\">\n            <label className=\"label\">密碼:</label>\n            <input\n              id=\"password\"\n              onChange={this.handleChange}\n              name=\"password\"\n              type=\"password\"\n              className={\"input\" + inputClass}\n              placeholder=\"請輸入密碼\"\n              value={password}\n            />\n          </div>\n          <div className=\"field\">\n            <label className=\"label\">Confirm Password:</label>\n            <input\n              id=\"passwordConfirm\"\n              onChange={this.handleChange}\n              name=\"passwordConfirm\"\n              type=\"password\"\n              className={\"input\" + inputClass}\n              placeholder=\"Confirm password..\"\n              value={passwordConfirm}\n            />\n          </div>\n          <div className=\"field\">\n            <button onClick={this.handleRegister} className=\"button is-primary\">\n              Register\n            </button>\n          </div>\n          <div className=\"field\">\n            <p>\n              Already have an account? click <Link to=\"/login\">here</Link>\n            </p>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  userExist: state.user.storedUsers\n});\n\nexport default connect(\n  mapStateToProps,\n  { addUser }\n)(Register);\n"]},"metadata":{},"sourceType":"module"}